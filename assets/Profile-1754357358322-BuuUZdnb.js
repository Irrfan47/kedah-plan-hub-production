import{a3 as e,j as t,a4 as o,a5 as r,a6 as i,a7 as n,a8 as a}from"./ui-vendor-1754357358322-Bp-UNE15.js";import{r as s,h as c}from"./react-vendor-1754357358322-BCu8432v.js";import{e as l,u as d,a as p,b as h,x as u,y as m,A as f,z as v,C as g,B as w,I as x,D as y,E as C,F as S,G as b}from"./index-1754357358322-CldQuBx-.js";import{C as j,a as P,b as R,c as z}from"./card-1754357358322-jzcAFHNM.js";import{L as N}from"./label-1754357358322-2ywHf4zy.js";import{B as D}from"./badge-1754357358322-C6KBoXlc.js";import{D as E,b as _,c as M,d as A}from"./dialog-1754357358322-2hcCCz0x.js";import{N as W,O as F,Q as T,H as L}from"./icons-vendor-1754357358322-D5w6PadE.js";import"./utils-vendor-1754357358322-CYErry0n.js";import"./query-vendor-1754357358322-D8Bw-8e5.js";const O=e,k=s.forwardRef(({className:e,...r},i)=>t.jsx(o,{ref:i,className:l("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...r}));k.displayName=o.displayName;const I=s.forwardRef(({className:e,...o},i)=>t.jsx(r,{ref:i,className:l("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...o}));I.displayName=r.displayName;const U=s.forwardRef(({className:e,...o},r)=>t.jsx(i,{ref:r,className:l("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...o}));U.displayName=i.displayName;var Z,H,G,V,X,q,Y,B,K,J,Q,$,ee,te,oe,re=!1;function ie(){if(!re){re=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),o=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if($=/\b(iPhone|iP[ao]d)/.exec(e),ee=/\b(iP[ao]d)/.exec(e),J=/Android/i.exec(e),te=/FBAN\/\w+;/i.exec(e),oe=/Mobile/i.exec(e),Q=!!/Win64/.exec(e),t){(Z=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN)&&document&&document.documentMode&&(Z=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(e);q=r?parseFloat(r[1])+4:Z,H=t[2]?parseFloat(t[2]):NaN,G=t[3]?parseFloat(t[3]):NaN,(V=t[4]?parseFloat(t[4]):NaN)?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),X=t&&t[1]?parseFloat(t[1]):NaN):X=NaN}else Z=H=G=X=V=NaN;if(o){if(o[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);Y=!i||parseFloat(i[1].replace("_","."))}else Y=!1;B=!!o[2],K=!!o[3]}else Y=B=K=!1}}var ne,ae={ie:function(){return ie()||Z},ieCompatibilityMode:function(){return ie()||q>Z},ie64:function(){return ae.ie()&&Q},firefox:function(){return ie()||H},opera:function(){return ie()||G},webkit:function(){return ie()||V},safari:function(){return ae.webkit()},chrome:function(){return ie()||X},windows:function(){return ie()||B},osx:function(){return ie()||Y},linux:function(){return ie()||K},iphone:function(){return ie()||$},mobile:function(){return ie()||$||ee||J||oe},nativeApp:function(){return ie()||te},android:function(){return ie()||J},ipad:function(){return ie()||ee}},se=ae,ce=!("undefined"==typeof window||!window.document||!window.document.createElement),le={canUseDOM:ce,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:ce&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:ce&&!!window.screen,isInWorker:!ce};le.canUseDOM&&(ne=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""))
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */;var de=se,pe=function(e,t){if(!le.canUseDOM||t&&!("addEventListener"in document))return!1;var o="on"+e,r=o in document;if(!r){var i=document.createElement("div");i.setAttribute(o,"return;"),r="function"==typeof i[o]}return!r&&ne&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r};function he(e){var t=0,o=0,r=0,i=0;return"detail"in e&&(o=e.detail),"wheelDelta"in e&&(o=-e.wheelDelta/120),"wheelDeltaY"in e&&(o=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=o,o=0),r=10*t,i=10*o,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||i)&&e.deltaMode&&(1==e.deltaMode?(r*=40,i*=40):(r*=800,i*=800)),r&&!t&&(t=r<1?-1:1),i&&!o&&(o=i<1?-1:1),{spinX:t,spinY:o,pixelX:r,pixelY:i}}he.getEventType=function(){return de.firefox()?"DOMMouseScroll":pe("wheel")?"wheel":"mousewheel"};const ue=c(he);function me(e,t,o,r,i){void 0===i&&(i=0);var n=Ce(t.width,t.height,i),a=n.width,s=n.height;return{x:fe(e.x,a,o.width,r),y:fe(e.y,s,o.height,r)}}function fe(e,t,o,r){var i=t*r/2-o/2;return Se(e,-i,i)}function ve(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function ge(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function we(e,t){return Math.min(e,Math.max(0,t))}function xe(e,t){return t}function ye(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function Ce(e,t,o){var r=o*Math.PI/180;return{width:Math.abs(Math.cos(r)*e)+Math.abs(Math.sin(r)*t),height:Math.abs(Math.sin(r)*e)+Math.abs(Math.cos(r)*t)}}function Se(e,t,o){return Math.min(Math.max(e,t),o)}function be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return"string"==typeof e&&e.length>0}).join(" ").trim()}var je=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.cropperRef=s.createRef(),o.imageRef=s.createRef(),o.videoRef=s.createRef(),o.containerPosition={x:0,y:0},o.containerRef=null,o.styleRef=null,o.containerRect=null,o.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},o.dragStartPosition={x:0,y:0},o.dragStartCrop={x:0,y:0},o.gestureZoomStart=0,o.gestureRotationStart=0,o.isTouching=!1,o.lastPinchDistance=0,o.lastPinchRotation=0,o.rafDragTimeout=null,o.rafPinchTimeout=null,o.wheelTimer=null,o.currentDoc="undefined"!=typeof document?document:null,o.currentWindow="undefined"!=typeof window?window:null,o.resizeObserver=null,o.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},o.initResizeObserver=function(){if(void 0!==window.ResizeObserver&&o.containerRef){var e=!0;o.resizeObserver=new window.ResizeObserver(function(t){e?e=!1:o.computeSizes()}),o.resizeObserver.observe(o.containerRef)}},o.preventZoomSafari=function(e){return e.preventDefault()},o.cleanEvents=function(){o.currentDoc&&(o.currentDoc.removeEventListener("mousemove",o.onMouseMove),o.currentDoc.removeEventListener("mouseup",o.onDragStopped),o.currentDoc.removeEventListener("touchmove",o.onTouchMove),o.currentDoc.removeEventListener("touchend",o.onDragStopped),o.currentDoc.removeEventListener("gesturechange",o.onGestureChange),o.currentDoc.removeEventListener("gestureend",o.onGestureEnd),o.currentDoc.removeEventListener("scroll",o.onScroll))},o.clearScrollEvent=function(){o.containerRef&&o.containerRef.removeEventListener("wheel",o.onWheel),o.wheelTimer&&clearTimeout(o.wheelTimer)},o.onMediaLoad=function(){var e=o.computeSizes();e&&(o.emitCropData(),o.setInitialCrop(e)),o.props.onMediaLoaded&&o.props.onMediaLoaded(o.mediaSize)},o.setInitialCrop=function(e){if(o.props.initialCroppedAreaPercentages){var t=function(e,t,o,r,i,n){var a=Ce(t.width,t.height,o),s=Se(r.width/a.width*(100/e.width),i,n);return{crop:{x:s*a.width/2-r.width/2-a.width*s*(e.x/100),y:s*a.height/2-r.height/2-a.height*s*(e.y/100)},zoom:s}}(o.props.initialCroppedAreaPercentages,o.mediaSize,o.props.rotation,e,o.props.minZoom,o.props.maxZoom),r=t.crop,i=t.zoom;o.props.onCropChange(r),o.props.onZoomChange&&o.props.onZoomChange(i)}else if(o.props.initialCroppedAreaPixels){var n=function(e,t,o,r,i,n){void 0===o&&(o=0);var a=Ce(t.naturalWidth,t.naturalHeight,o),s=Se(function(e,t,o){var r=function(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}(t);return o.height>o.width?o.height/(e.height*r):o.width/(e.width*r)}(e,t,r),i,n),c=r.height>r.width?r.height/e.height:r.width/e.width;return{crop:{x:((a.width-e.width)/2-e.x)*c,y:((a.height-e.height)/2-e.y)*c},zoom:s}}(o.props.initialCroppedAreaPixels,o.mediaSize,o.props.rotation,e,o.props.minZoom,o.props.maxZoom);r=n.crop,i=n.zoom;o.props.onCropChange(r),o.props.onZoomChange&&o.props.onZoomChange(i)}},o.computeSizes=function(){var e,t,r,i,n,s,c=o.imageRef.current||o.videoRef.current;if(c&&o.containerRef){o.containerRect=o.containerRef.getBoundingClientRect(),o.saveContainerPosition();var l=o.containerRect.width/o.containerRect.height,d=(null===(e=o.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=o.videoRef.current)||void 0===t?void 0:t.videoWidth)||0,p=(null===(r=o.imageRef.current)||void 0===r?void 0:r.naturalHeight)||(null===(i=o.videoRef.current)||void 0===i?void 0:i.videoHeight)||0,h=d/p,u=void 0;if(c.offsetWidth<d||c.offsetHeight<p)switch(o.state.mediaObjectFit){default:case"contain":u=l>h?{width:o.containerRect.height*h,height:o.containerRect.height}:{width:o.containerRect.width,height:o.containerRect.width/h};break;case"horizontal-cover":u={width:o.containerRect.width,height:o.containerRect.width/h};break;case"vertical-cover":u={width:o.containerRect.height*h,height:o.containerRect.height}}else u={width:c.offsetWidth,height:c.offsetHeight};o.mediaSize=a(a({},u),{naturalWidth:d,naturalHeight:p}),o.props.setMediaSize&&o.props.setMediaSize(o.mediaSize);var m=o.props.cropSize?o.props.cropSize:function(e,t,o,r,i,n){void 0===n&&(n=0);var a=Ce(e,t,n),s=a.width,c=a.height,l=Math.min(s,o),d=Math.min(c,r);return l>d*i?{width:d*i,height:d}:{width:l,height:l/i}}(o.mediaSize.width,o.mediaSize.height,o.containerRect.width,o.containerRect.height,o.props.aspect,o.props.rotation);return(null===(n=o.state.cropSize)||void 0===n?void 0:n.height)===m.height&&(null===(s=o.state.cropSize)||void 0===s?void 0:s.width)===m.width||o.props.onCropSizeChange&&o.props.onCropSizeChange(m),o.setState({cropSize:m},o.recomputeCropPosition),o.props.setCropSize&&o.props.setCropSize(m),m}},o.saveContainerPosition=function(){if(o.containerRef){var e=o.containerRef.getBoundingClientRect();o.containerPosition={x:e.left,y:e.top}}},o.onMouseDown=function(e){o.currentDoc&&(e.preventDefault(),o.currentDoc.addEventListener("mousemove",o.onMouseMove),o.currentDoc.addEventListener("mouseup",o.onDragStopped),o.saveContainerPosition(),o.onDragStart(t.getMousePoint(e)))},o.onMouseMove=function(e){return o.onDrag(t.getMousePoint(e))},o.onScroll=function(e){o.currentDoc&&(e.preventDefault(),o.saveContainerPosition())},o.onTouchStart=function(e){o.currentDoc&&(o.isTouching=!0,o.props.onTouchRequest&&!o.props.onTouchRequest(e)||(o.currentDoc.addEventListener("touchmove",o.onTouchMove,{passive:!1}),o.currentDoc.addEventListener("touchend",o.onDragStopped),o.saveContainerPosition(),2===e.touches.length?o.onPinchStart(e):1===e.touches.length&&o.onDragStart(t.getTouchPoint(e.touches[0]))))},o.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?o.onPinchMove(e):1===e.touches.length&&o.onDrag(t.getTouchPoint(e.touches[0]))},o.onGestureStart=function(e){o.currentDoc&&(e.preventDefault(),o.currentDoc.addEventListener("gesturechange",o.onGestureChange),o.currentDoc.addEventListener("gestureend",o.onGestureEnd),o.gestureZoomStart=o.props.zoom,o.gestureRotationStart=o.props.rotation)},o.onGestureChange=function(e){if(e.preventDefault(),!o.isTouching){var r=t.getMousePoint(e),i=o.gestureZoomStart-1+e.scale;if(o.setNewZoom(i,r,{shouldUpdatePosition:!0}),o.props.onRotationChange){var n=o.gestureRotationStart+e.rotation;o.props.onRotationChange(n)}}},o.onGestureEnd=function(e){o.cleanEvents()},o.onDragStart=function(e){var t,r,i=e.x,n=e.y;o.dragStartPosition={x:i,y:n},o.dragStartCrop=a({},o.props.crop),null===(r=(t=o.props).onInteractionStart)||void 0===r||r.call(t)},o.onDrag=function(e){var t=e.x,r=e.y;o.currentWindow&&(o.rafDragTimeout&&o.currentWindow.cancelAnimationFrame(o.rafDragTimeout),o.rafDragTimeout=o.currentWindow.requestAnimationFrame(function(){if(o.state.cropSize&&void 0!==t&&void 0!==r){var e=t-o.dragStartPosition.x,i=r-o.dragStartPosition.y,n={x:o.dragStartCrop.x+e,y:o.dragStartCrop.y+i},a=o.props.restrictPosition?me(n,o.mediaSize,o.state.cropSize,o.props.zoom,o.props.rotation):n;o.props.onCropChange(a)}}))},o.onDragStopped=function(){var e,t;o.isTouching=!1,o.cleanEvents(),o.emitCropData(),null===(t=(e=o.props).onInteractionEnd)||void 0===t||t.call(e)},o.onWheel=function(e){if(o.currentWindow&&(!o.props.onWheelRequest||o.props.onWheelRequest(e))){e.preventDefault();var r=t.getMousePoint(e),i=ue(e).pixelY,n=o.props.zoom-i*o.props.zoomSpeed/200;o.setNewZoom(n,r,{shouldUpdatePosition:!0}),o.state.hasWheelJustStarted||o.setState({hasWheelJustStarted:!0},function(){var e,t;return null===(t=(e=o.props).onInteractionStart)||void 0===t?void 0:t.call(e)}),o.wheelTimer&&clearTimeout(o.wheelTimer),o.wheelTimer=o.currentWindow.setTimeout(function(){return o.setState({hasWheelJustStarted:!1},function(){var e,t;return null===(t=(e=o.props).onInteractionEnd)||void 0===t?void 0:t.call(e)})},250)}},o.getPointOnContainer=function(e,t){var r=e.x,i=e.y;if(!o.containerRect)throw new Error("The Cropper is not mounted");return{x:o.containerRect.width/2-(r-t.x),y:o.containerRect.height/2-(i-t.y)}},o.getPointOnMedia=function(e){var t=e.x,r=e.y,i=o.props,n=i.crop,a=i.zoom;return{x:(t+n.x)/a,y:(r+n.y)/a}},o.setNewZoom=function(e,t,r){var i=(void 0===r?{}:r).shouldUpdatePosition,n=void 0===i||i;if(o.state.cropSize&&o.props.onZoomChange){var a=Se(e,o.props.minZoom,o.props.maxZoom);if(n){var s=o.getPointOnContainer(t,o.containerPosition),c=o.getPointOnMedia(s),l={x:c.x*a-s.x,y:c.y*a-s.y},d=o.props.restrictPosition?me(l,o.mediaSize,o.state.cropSize,a,o.props.rotation):l;o.props.onCropChange(d)}o.props.onZoomChange(a)}},o.getCropData=function(){return o.state.cropSize?function(e,t,o,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=!0);var c=s?we:xe,l=Ce(t.width,t.height,n),d=Ce(t.naturalWidth,t.naturalHeight,n),p={x:c(100,((l.width-o.width/i)/2-e.x/i)/l.width*100),y:c(100,((l.height-o.height/i)/2-e.y/i)/l.height*100),width:c(100,o.width/l.width*100/i),height:c(100,o.height/l.height*100/i)},h=Math.round(c(d.width,p.width*d.width/100)),u=Math.round(c(d.height,p.height*d.height/100)),m=d.width>=d.height*r?{width:Math.round(u*r),height:u}:{width:h,height:Math.round(h/r)};return{croppedAreaPercentages:p,croppedAreaPixels:a(a({},m),{x:Math.round(c(d.width-m.width,p.x*d.width/100)),y:Math.round(c(d.height-m.height,p.y*d.height/100))})}}(o.props.restrictPosition?me(o.props.crop,o.mediaSize,o.state.cropSize,o.props.zoom,o.props.rotation):o.props.crop,o.mediaSize,o.state.cropSize,o.getAspect(),o.props.zoom,o.props.rotation,o.props.restrictPosition):null},o.emitCropData=function(){var e=o.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;o.props.onCropComplete&&o.props.onCropComplete(t,r),o.props.onCropAreaChange&&o.props.onCropAreaChange(t,r)}},o.emitCropAreaChange=function(){var e=o.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;o.props.onCropAreaChange&&o.props.onCropAreaChange(t,r)}},o.recomputeCropPosition=function(){if(o.state.cropSize){var e=o.props.restrictPosition?me(o.props.crop,o.mediaSize,o.state.cropSize,o.props.zoom,o.props.rotation):o.props.crop;o.props.onCropChange(e),o.emitCropData()}},o.onKeyDown=function(e){var t,r,i=o.props,n=i.crop,s=i.onCropChange,c=i.keyboardStep,l=i.zoom,d=i.rotation,p=c;if(o.state.cropSize){e.shiftKey&&(p*=.2);var h=a({},n);switch(e.key){case"ArrowUp":h.y-=p,e.preventDefault();break;case"ArrowDown":h.y+=p,e.preventDefault();break;case"ArrowLeft":h.x-=p,e.preventDefault();break;case"ArrowRight":h.x+=p,e.preventDefault();break;default:return}o.props.restrictPosition&&(h=me(h,o.mediaSize,o.state.cropSize,l,d)),e.repeat||null===(r=(t=o.props).onInteractionStart)||void 0===r||r.call(t),s(h)}},o.onKeyUp=function(e){var t,r;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":e.preventDefault();break;default:return}o.emitCropData(),null===(r=(t=o.props).onInteractionEnd)||void 0===r||r.call(t)},o}return n(t,e),t.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),void 0===window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},t.prototype.componentWillUnmount=function(){var e,t;this.currentDoc&&this.currentWindow&&(void 0===window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null===(t=this.styleRef.parentNode)||void 0===t||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(e){var t,o,r,i,n,a,s,c,l;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect||e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(o=this.props.cropSize)||void 0===o?void 0:o.height)||(null===(r=e.cropSize)||void 0===r?void 0:r.width)!==(null===(i=this.props.cropSize)||void 0===i?void 0:i.width)?this.computeSizes():(null===(n=e.crop)||void 0===n?void 0:n.x)===(null===(a=this.props.crop)||void 0===a?void 0:a.x)&&(null===(s=e.crop)||void 0===s?void 0:s.y)===(null===(c=this.props.crop)||void 0===c?void 0:c.y)||this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null===(l=this.videoRef.current)||void 0===l||l.load());var d=this.getObjectFit();d!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:d},this.computeSizes)},t.prototype.getAspect=function(){var e=this.props,t=e.cropSize,o=e.aspect;return t?t.width/t.height:o},t.prototype.getObjectFit=function(){var e,t,o,r;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var i=this.containerRect.width/this.containerRect.height;return((null===(e=this.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=this.videoRef.current)||void 0===t?void 0:t.videoWidth)||0)/((null===(o=this.imageRef.current)||void 0===o?void 0:o.naturalHeight)||(null===(r=this.videoRef.current)||void 0===r?void 0:r.videoHeight)||0)<i?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(e){var o=t.getTouchPoint(e.touches[0]),r=t.getTouchPoint(e.touches[1]);this.lastPinchDistance=ve(o,r),this.lastPinchRotation=ge(o,r),this.onDragStart(ye(o,r))},t.prototype.onPinchMove=function(e){var o=this;if(this.currentDoc&&this.currentWindow){var r=t.getTouchPoint(e.touches[0]),i=t.getTouchPoint(e.touches[1]),n=ye(r,i);this.onDrag(n),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var e=ve(r,i),t=o.props.zoom*(e/o.lastPinchDistance);o.setNewZoom(t,n,{shouldUpdatePosition:!1}),o.lastPinchDistance=e;var a=ge(r,i),s=o.props.rotation+(a-o.lastPinchRotation);o.props.onRotationChange&&o.props.onRotationChange(s),o.lastPinchRotation=a})}},t.prototype.render=function(){var e,t=this,o=this.props,r=o.image,i=o.video,n=o.mediaProps,c=o.cropperProps,l=o.transform,d=o.crop,p=d.x,h=d.y,u=o.rotation,m=o.zoom,f=o.cropShape,v=o.showGrid,g=o.roundCropAreaPixels,w=o.style,x=w.containerStyle,y=w.cropAreaStyle,C=w.mediaStyle,S=o.classes,b=S.containerClassName,j=S.cropAreaClassName,P=S.mediaClassName,R=null!==(e=this.state.mediaObjectFit)&&void 0!==e?e:this.getObjectFit();return s.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(e){return t.containerRef=e},"data-testid":"container",style:x,className:be("reactEasyCrop_Container",b)},r?s.createElement("img",a({alt:"",className:be("reactEasyCrop_Image","contain"===R&&"reactEasyCrop_Contain","horizontal-cover"===R&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===R&&"reactEasyCrop_Cover_Vertical",P)},n,{src:r,ref:this.imageRef,style:a(a({},C),{transform:l||"translate(".concat(p,"px, ").concat(h,"px) rotate(").concat(u,"deg) scale(").concat(m,")")}),onLoad:this.onMediaLoad})):i&&s.createElement("video",a({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:be("reactEasyCrop_Video","contain"===R&&"reactEasyCrop_Contain","horizontal-cover"===R&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===R&&"reactEasyCrop_Cover_Vertical",P)},n,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:a(a({},C),{transform:l||"translate(".concat(p,"px, ").concat(h,"px) rotate(").concat(u,"deg) scale(").concat(m,")")}),controls:!1}),(Array.isArray(i)?i:[{src:i}]).map(function(e){return s.createElement("source",a({key:e.src},e))})),this.state.cropSize&&s.createElement("div",a({ref:this.cropperRef,style:a(a({},y),{width:g?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:g?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:be("reactEasyCrop_CropArea","round"===f&&"reactEasyCrop_CropAreaRound",v&&"reactEasyCrop_CropAreaGrid",j)},c)))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:1},t.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t}(s.Component);function Pe(){const{user:e,setUser:o}=d(),{toast:r}=p(),{t:i}=h(),[n,a]=s.useState({fullName:"",email:"",phoneNumber:""}),[c,l]=s.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[Z,H]=s.useState(null),[G,V]=s.useState(""),[X,q]=s.useState(!1),[Y,B]=s.useState(!1),[K,J]=s.useState(null),[Q,$]=s.useState({x:0,y:0}),[ee,te]=s.useState(1),[oe,re]=s.useState(null),[ie,ne]=s.useState(""),[ae,se]=s.useState("");s.useEffect(()=>{(null==e?void 0:e.id)&&(ce(),le())},[null==e?void 0:e.id]);const ce=async()=>{if(null==e?void 0:e.id)try{const t=await u(e.id);if(t.success&&t.user){const r={...e,fullName:t.user.full_name,full_name:t.user.full_name,email:t.user.email,phoneNumber:t.user.phone_number,phone_number:t.user.phone_number,role:t.user.role,isActive:1===t.user.is_active,is_active:1===t.user.is_active,createdAt:t.user.created_at,created_at:t.user.created_at};o(r),a({fullName:t.user.full_name||"",email:t.user.email||"",phoneNumber:t.user.phone_number||""})}}catch(t){}},le=async()=>{if(null==e?void 0:e.id)try{const t=await m(e.id);t.success&&t.profile_picture&&V(t.profile_picture)}catch(t){}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-foreground",children:i("profile.title")}),t.jsx("p",{className:"text-muted-foreground",children:i("profile.subtitle")})]}),t.jsxs(O,{defaultValue:"profile",className:"space-y-6",children:[t.jsxs(k,{children:[t.jsxs(I,{value:"profile",children:[t.jsx(W,{className:"h-4 w-4 mr-2"}),"Profile Information"]}),t.jsxs(I,{value:"password",children:[t.jsx(F,{className:"h-4 w-4 mr-2"}),"Change Password"]})]}),t.jsxs(U,{value:"profile",className:"space-y-6",children:[t.jsxs(j,{children:[t.jsx(P,{children:t.jsx(R,{children:i("profile.photo")})}),t.jsx(z,{children:t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsxs(f,{className:"h-24 w-24",children:[t.jsx(v,{src:G,alt:"Profile"}),t.jsx(g,{className:"text-lg",children:e?(pe=e.fullName||e.full_name,pe?pe.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):""):"U"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:i("profile.photo_desc")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(w,{variant:"outline",asChild:!0,children:t.jsxs("label",{htmlFor:"profile-photo",className:"cursor-pointer",children:[t.jsx(T,{className:"h-4 w-4 mr-2"}),i("profile.change_photo"),t.jsx("input",{id:"profile-photo",type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;const o=null==(t=e.target.files)?void 0:t[0];if(o){H(o);const e=new FileReader;e.onload=e=>{var t;const o=null==(t=e.target)?void 0:t.result;J(o),ne(o),B(!0)},e.readAsDataURL(o)}}})]})}),ie&&ae&&t.jsx(w,{variant:"outline",onClick:async()=>{if(ie&&ae&&(null==e?void 0:e.id)){if(!X){q(!0);try{const t=await C(e.id,ie,ae);if(t.success){r({title:"Success",description:"Profile picture uploaded successfully"}),H(null),ne(""),se("");const t={...e,profilePhoto:G};o(t)}else r({title:"Error",description:t.message||"Failed to upload profile picture",variant:"destructive"})}catch(t){r({title:"Error",description:"Failed to upload profile picture",variant:"destructive"})}finally{q(!1)}}}else r({title:"Error",description:"Please select and crop a profile picture first",variant:"destructive"})},disabled:X,children:i(X?"profile.uploading":"profile.upload")}),G&&t.jsx(w,{variant:"outline",onClick:()=>{H(null),ne(""),se(""),V((null==e?void 0:e.profilePhoto)||"")},children:i("profile.reset")})]})]})]})}),t.jsx(E,{open:Y,onOpenChange:B,children:t.jsxs(_,{children:[t.jsx(M,{children:t.jsx(A,{children:"Crop your profile picture"})}),t.jsx("div",{style:{position:"relative",width:300,height:300,background:"#222"},children:K&&t.jsx(je,{image:K,crop:Q,zoom:ee,aspect:1,onCropChange:$,onZoomChange:te,onCropComplete:(e,t)=>{re(t)}})}),t.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[t.jsx(w,{variant:"outline",onClick:()=>B(!1),children:"Cancel"}),t.jsx(w,{variant:"primary",onClick:async()=>{var e,t;if(K&&oe)try{const o=await(e=K,t=oe,new Promise((o,r)=>{const i=new window.Image;i.src=e,i.onload=()=>{const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");if(!n)return r();n.drawImage(i,t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.toBlob(e=>{e?o(e):r()},"image/jpeg")},i.onerror=r})),r=new FileReader;r.onload=e=>{var t;const o=null==(t=e.target)?void 0:t.result;se(o),V(o)},r.readAsDataURL(o),H(new File([o],"profile.jpg",{type:"image/jpeg"})),B(!1),J(null)}catch(o){r({title:"Error",description:"Failed to crop image",variant:"destructive"})}},children:"Crop & Use"})]})]})})]}),t.jsxs(j,{children:[t.jsx(P,{children:t.jsx(R,{children:i("profile.basic_info")})}),t.jsxs(z,{className:"space-y-6",children:[t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsxs(N,{htmlFor:"fullName",children:[i("profile.full_name")," *"]}),t.jsx(x,{id:"fullName",value:n.fullName,onChange:e=>a({...n,fullName:e.target.value}),placeholder:i("profile.full_name")})]}),t.jsxs("div",{children:[t.jsxs(N,{htmlFor:"email",children:[i("profile.email")," *"]}),t.jsx(x,{id:"email",type:"email",value:n.email,onChange:e=>a({...n,email:e.target.value}),placeholder:i("profile.email")})]}),t.jsxs("div",{children:[t.jsxs(N,{htmlFor:"phoneNumber",children:[i("profile.phone")," *"]}),t.jsx(x,{id:"phoneNumber",value:n.phoneNumber,onChange:e=>a({...n,phoneNumber:e.target.value}),placeholder:i("profile.phone")})]}),t.jsxs("div",{children:[t.jsx(N,{children:i("profile.role")}),t.jsx("div",{className:"mt-2",children:t.jsx(D,{className:(de=(null==e?void 0:e.role)||"",{admin:"bg-red-100 text-red-800",exco_user:"bg-blue-100 text-blue-800",finance_mmk:"bg-green-100 text-green-800",finance_officer:"bg-blue-100 text-blue-800",super_admin:"bg-purple-100 text-purple-800"}[de]||"bg-gray-100 text-gray-800"),children:(e=>({admin:i("role.admin"),exco_user:i("role.exco_user"),finance_mmk:i("role.finance_mmk"),finance_officer:i("role.finance_officer"),super_admin:i("role.super_admin")}[e]||e))((null==e?void 0:e.role)||"")})})]})]}),t.jsx(y,{}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx(N,{children:i("profile.account_status")}),t.jsx("div",{className:"mt-2",children:t.jsx(D,{className:(null==e?void 0:e.isActive)?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:(null==e?void 0:e.isActive)?i("users.active"):i("users.inactive")})})]}),t.jsxs("div",{children:[t.jsx(N,{children:i("profile.member_since")}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:(null==e?void 0:e.createdAt)?new Date(e.createdAt).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs(w,{onClick:async()=>{if(!n.fullName||!n.email||!n.phoneNumber)return void r({title:"Error",description:"Please fill all required fields",variant:"destructive"});if(!(null==e?void 0:e.id))return void r({title:"Error",description:"User not found.",variant:"destructive"});const t=await S(e.id,n.fullName,n.email,n.phoneNumber);t.success?(r({title:"Success",description:"Profile updated successfully"}),await ce()):r({title:"Error",description:t.message||"Failed to update profile",variant:"destructive"})},children:[t.jsx(L,{className:"h-4 w-4 mr-2"}),i("profile.update_profile")]})})]})]})]}),t.jsx(U,{value:"password",className:"space-y-6",children:t.jsxs(j,{children:[t.jsxs(P,{children:[t.jsx(R,{children:i("profile.change_password")}),t.jsx("p",{className:"text-sm text-muted-foreground",children:i("profile.password_desc")})]}),t.jsxs(z,{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs(N,{htmlFor:"currentPassword",children:[i("profile.current_password")," *"]}),t.jsx(x,{id:"currentPassword",type:"password",value:c.currentPassword,onChange:e=>l({...c,currentPassword:e.target.value}),placeholder:i("profile.current_password")})]}),t.jsxs("div",{children:[t.jsxs(N,{htmlFor:"newPassword",children:[i("profile.new_password")," *"]}),t.jsx(x,{id:"newPassword",type:"password",value:c.newPassword,onChange:e=>l({...c,newPassword:e.target.value}),placeholder:i("profile.new_password")}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i("profile.password_help")})]}),t.jsxs("div",{children:[t.jsxs(N,{htmlFor:"confirmPassword",children:[i("profile.confirm_password")," *"]}),t.jsx(x,{id:"confirmPassword",type:"password",value:c.confirmPassword,onChange:e=>l({...c,confirmPassword:e.target.value}),placeholder:i("profile.confirm_password")})]}),t.jsx(y,{}),t.jsx("div",{className:"flex justify-end",children:t.jsxs(w,{onClick:async()=>{if(!c.currentPassword||!c.newPassword||!c.confirmPassword)return void r({title:"Error",description:"Please fill all password fields",variant:"destructive"});if(c.newPassword!==c.confirmPassword)return void r({title:"Error",description:"New passwords do not match",variant:"destructive"});if(c.newPassword.length<8)return void r({title:"Error",description:"Password must be at least 8 characters long",variant:"destructive"});if(!(null==e?void 0:e.id))return void r({title:"Error",description:"User not found.",variant:"destructive"});const t=await b(e.id,c.currentPassword,c.newPassword);t.success?(l({currentPassword:"",newPassword:"",confirmPassword:""}),r({title:"Success",description:"Password changed successfully"})):r({title:"Error",description:t.message||"Failed to change password",variant:"destructive"})},children:[t.jsx(F,{className:"h-4 w-4 mr-2"}),i("profile.change_password_btn")]})})]})]})})]})]});var de,pe}export{Pe as default};
