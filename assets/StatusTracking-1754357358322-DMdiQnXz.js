import{j as e}from"./ui-vendor-1754357358322-Bp-UNE15.js";import{r as s}from"./react-vendor-1754357358322-BCu8432v.js";import{C as t,a as r,b as a,c as l}from"./card-1754357358322-jzcAFHNM.js";import{T as n,a as d,b as c,c as i,d as m,e as o}from"./table-1754357358322-C8S8WM1D.js";import{B as u}from"./badge-1754357358322-C6KBoXlc.js";import{b as x,k as _,g as j,I as p}from"./index-1754357358322-CldQuBx-.js";import{S as h,a as g,b as f,c as b,d as y}from"./select-1754357358322-DTWo5oSS.js";import{t as v}from"./icons-vendor-1754357358322-D5w6PadE.js";import"./utils-vendor-1754357358322-CYErry0n.js";import"./query-vendor-1754357358322-D8Bw-8e5.js";const w=e=>{const s={draft:"bg-gray-100 text-gray-800",under_review:"bg-blue-100 text-blue-800",query:"bg-orange-100 text-orange-800",query_answered:"bg-purple-100 text-purple-800",complete_can_send_to_mmk:"bg-yellow-100 text-yellow-800",under_review_by_mmk:"bg-indigo-100 text-indigo-800",document_accepted_by_mmk:"bg-teal-100 text-teal-800",payment_in_progress:"bg-amber-100 text-amber-800",payment_completed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return s[e]||s.draft};function N(){const{t:N}=x(),[k,q]=s.useState(""),[S,C]=s.useState("all"),[L,M]=s.useState("all"),[D,I]=s.useState([]),[K,z]=s.useState([]),[A,P]=s.useState(!0);s.useEffect(()=>{_().then(e=>{e.success&&e.programs&&I(e.programs),P(!1)}),j().then(e=>{e.success&&e.users&&z(e.users)})},[]);const V=e=>{const s=K.find(s=>s.id.toString()===e);return s?s.fullName||s.full_name||s.email||s.id:e},B=D.filter(e=>{const s=e.program_name.toLowerCase().includes(k.toLowerCase())||e.recipient_name.toLowerCase().includes(k.toLowerCase())||e.exco_letter_ref.toLowerCase().includes(k.toLowerCase()),t="all"===S||e.status===S,r="all"===L||e.created_by==L;return s&&t&&r}).sort((e,s)=>{const t=parseInt(e.id);return parseInt(s.id)-t}),E={total:D.length,payment_completed:D.filter(e=>"payment_completed"===e.status).length,pending:D.filter(e=>["under_review","query","query_answered","complete_can_send_to_mmk","under_review_by_mmk","document_accepted_by_mmk","payment_in_progress"].includes(e.status)).length,rejected:D.filter(e=>"rejected"===e.status).length};return A?e.jsx("div",{className:"space-y-6 mobile-zoom-out",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:N("status.title")}),e.jsx("p",{className:"text-muted-foreground",children:N("common.loading")})]})}):e.jsxs("div",{className:"space-y-6 mobile-zoom-out",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:N("status.title")}),e.jsx("p",{className:"text-muted-foreground",children:N("status.subtitle")})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(t,{children:[e.jsx(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(a,{className:"text-sm font-medium",children:N("status.total_programs")})}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold",children:E.total})})]}),e.jsxs(t,{children:[e.jsx(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(a,{className:"text-sm font-medium",children:N("status.payment_completed")})}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:E.payment_completed})})]}),e.jsxs(t,{children:[e.jsx(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(a,{className:"text-sm font-medium",children:N("status.pending")})}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:E.pending})})]}),e.jsxs(t,{children:[e.jsx(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(a,{className:"text-sm font-medium",children:N("status.rejected")})}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:E.rejected})})]})]}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(a,{children:N("status.programs_overview")})}),e.jsxs(l,{children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs(h,{value:L,onValueChange:M,children:[e.jsx(g,{className:"w-48",children:e.jsx(f,{placeholder:N("users.all_roles")})}),e.jsxs(b,{children:[e.jsx(y,{value:"all",children:N("users.all_roles")}),K.filter(e=>"exco_user"===e.role).map(s=>e.jsx(y,{value:s.id.toString(),children:s.fullName||s.full_name||s.email||s.id},s.id))]})]}),e.jsx(p,{className:"w-64",placeholder:N("status.search_programs"),value:k,onChange:e=>q(e.target.value),prefix:e.jsx(v,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs(h,{value:S,onValueChange:C,children:[e.jsx(g,{className:"w-48",children:e.jsx(f,{placeholder:"All Status"})}),e.jsxs(b,{children:[e.jsx(y,{value:"all",children:N("status.all_status")}),e.jsx(y,{value:"draft",children:N("status.draft")}),e.jsx(y,{value:"under_review",children:N("status.under_review")}),e.jsx(y,{value:"query",children:N("status.query")}),e.jsx(y,{value:"query_answered",children:N("status.query_answered")}),e.jsx(y,{value:"complete_can_send_to_mmk",children:N("status.complete_can_send_to_mmk")}),e.jsx(y,{value:"under_review_by_mmk",children:N("status.under_review_by_mmk")}),e.jsx(y,{value:"document_accepted_by_mmk",children:N("status.document_accepted_by_mmk")}),e.jsx(y,{value:"payment_in_progress",children:N("status.payment_in_progress")}),e.jsx(y,{value:"payment_completed",children:N("status.payment_completed")}),e.jsx(y,{value:"rejected",children:N("status.rejected")})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(n,{children:[e.jsx(d,{children:e.jsxs(c,{children:[e.jsx(i,{children:N("programs.program_name")}),e.jsx(i,{children:N("programs.budget_rm")}),e.jsx(i,{children:N("programs.recipient")}),e.jsx(i,{children:N("status.letter_ref")}),e.jsx(i,{children:N("programs.status")}),e.jsx(i,{children:N("programs.created_by")}),e.jsx(i,{children:N("common.date")}),e.jsx(i,{children:N("status.voucher_no")}),e.jsx(i,{children:N("status.eft_no")})]})}),e.jsx(m,{children:B.map(s=>{return e.jsxs(c,{children:[e.jsx(o,{className:"font-medium",children:s.program_name}),e.jsx(o,{children:s.budget.toLocaleString()}),e.jsx(o,{children:s.recipient_name}),e.jsx(o,{children:s.exco_letter_ref}),e.jsx(o,{children:e.jsx(u,{className:w(s.status),children:N((t=s.status,{draft:"status.draft",under_review:"status.pending",query:"queries.title",query_answered:"status.query_answered",complete_can_send_to_mmk:"Complete & Send to MMK",under_review_by_mmk:"Under Review by MMK",document_accepted_by_mmk:"Document Accepted by MMK",payment_in_progress:"Payment in Progress",payment_completed:"status.payment_completed",rejected:"status.rejected"}[t]||t))})}),e.jsx(o,{children:V(s.created_by)}),e.jsx(o,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(o,{children:s.voucher_number||"-"}),e.jsx(o,{children:s.eft_number||"-"})]},s.id);var t})})]})})]})]})]})}export{N as default};
